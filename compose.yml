version: "3.5"
# You should be able to find & replace all instances of fail2ban with 
# your actual_service_name. Then you just need address any places that 
# typically need changes (designated by comments)

networks:
  fail2ban:

volumes:
  fail2ban:

services:
  ingress:
    networks:
      - fail2ban

  fail2ban:
    deploy:
      mode: global
      restart_policy:
        condition: any
      placement:
        constraints:
          - node.role == manager
      # Big services will need this modified or removed.
      resources:
        limits:
          memory: 128M
        reservations:
          memory: 64M
    image: ${image_provider:-scififarms}/technocore-fail2ban:${TAG:-latest}
    #<<: *logging-defaults
    networks:
      - fail2ban
    volumes:
      # Likely need to change this
      - fail2ban:/var/lib/fail2ban
